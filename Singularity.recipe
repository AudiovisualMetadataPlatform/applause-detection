Bootstrap: docker
From: ubuntu

%help
Applause Detection using Tensorflow, integrated into AMP/Galaxy as Singularity

%labels
Version 0.1

%environment

%setup

%files
    run.py /usr/local/bin
    amp_segment.py    

%post
    # install updates & dependencies
    apt-get update && TZ="America/New_York" DEBIAN_FRONTEND=noninteractive && apt-get install tzdata
    apt-get install -qq -y ffmpeg python3 python3-pip
    pip3 install -r requirements.txt
    
%runscript
    /usr/local/bin/run.py -s pretrained/applause-binary-20210203 "$1" -o "$1" -T "$2" -b
